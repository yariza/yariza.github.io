{"version":3,"sources":["webpack:///./src/clouds/index.js","webpack:///./src/sketch.js","webpack:///./src/basesketch.js","webpack:///./src/clouds/shaders/clouds.vert","webpack:///./src/clouds/shaders/clouds.frag"],"names":["__webpack_require__","Clouds","options","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","getName","supportsAudio","setup","time","gl","ctx","context","viewport","width","height","vs","createShader","VERTEX_SHADER","shaderSource","cloudsVert","compileShader","fs","FRAGMENT_SHADER","cloudsFrag","program","createProgram","attachShader","linkProgram","getShaderParameter","COMPILE_STATUS","console","warn","split","map","line","i","slice","join","error","getShaderInfoLog","getProgramParameter","LINK_STATUS","getProgramInfoLog","vertices","Float32Array","vbuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","useProgram","uColor","getUniformLocation","uniform4fv","uTime","uniform1f","uResolution","uniform2fv","aVertexPosition","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","drawArrays","TRIANGLES","resize","mousemove","update","draw","stats","end","begin","_get","prototype","curDark","dark","Sketch","create","assign","type","retina","bind","BaseSketch","root","factory","_typeof","exports","module","document","undefined","__WEBPACK_AMD_DEFINE_RESULT__","window","MATH_PROPS","M","Math","CANVAS","DOM","doc","win","instances","defaults","fullscreen","autostart","autoclear","autopause","container","body","interval","globals","keyMap","8","9","13","16","27","32","37","38","39","40","isFunction","object","isString","extend","target","source","overwrite","key","proxy","method","apply","arguments","constructor","request","handler","parent","bounds","index","suffix","clock","node","copy","val","min","max","w","h","counter","touches","resized","ratio","devicePixelRatio","isDiv","is2D","mouse","x","y","ox","oy","dx","dy","eventMap","eventTarget","element","pointer","event","keyCode","keys","code","String","fromCharCode","keyName","trigger","stop","start","splice","on","length","passive","capture","style","canvas","innerHeight","innerWidth","scale","augment","touch","getBoundingClientRect","pageX","left","scrollX","pageXOffset","pageY","top","scrollY","pageYOffset","align","process","currentTarget","preventDefault","clone","originalEvent","indexOf","dragging","test","now","Date","running","millis","NaN","dt","destroy","parentNode","removeChild","toggle","clear","clearRect","push","cAF","rAF","save","restore","WEB_GL","WEBGL","install","TWO_PI","PI","HALF_PI","QUARTER_PI","random","toString","isArray","isNumber","lerp","amount","num","minA","maxA","minB","maxB","self","createElement","getContext","appendChild","className","vendors","scope","then","a","b","c","callback","id","setTimeout","clearTimeout","darkBG","match","v","parseInt","lightBG","CCapture","ccapture","format","framerate","verbose","numframes","frames"],"mappings":"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","file":"clouds.bundle.js","sourcesContent":["import Sketch from '../sketch';\nimport BaseSketch from '../basesketch';\nimport { clamp } from '../utils';\nimport cloudsVert from './shaders/clouds.vert';\nimport cloudsFrag from './shaders/clouds.frag';\n\nexport default class Clouds extends BaseSketch {\n\n    getName = () => {\n        return 'clouds';\n    }\n\n    supportsAudio = () => {\n        return false;\n    }\n\n    constructor(options) {\n        super();\n\n        this.curDark = this.dark;\n\n        this.ctx = Sketch.create(Object.assign(options, {\n            type: 'webgl',\n            retina: false,\n        }));\n\n        this.ctx.setup = this.setup.bind(this);\n        this.ctx.resize = this.resize.bind(this);\n        this.ctx.mousemove = this.mousemove.bind(this);\n        this.ctx.update = this.update.bind(this);\n        this.ctx.draw = this.draw.bind(this);\n    }\n\n    setup = () => {\n        this.time = 0;\n\n        let gl = this.ctx.context;\n\n        gl.viewport(0, 0, this.ctx.width, this.ctx.height);\n\n        let vs = gl.createShader(gl.VERTEX_SHADER);\n        gl.shaderSource(vs, cloudsVert);\n        gl.compileShader(vs);\n\n        let fs = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(fs, cloudsFrag);\n        gl.compileShader(fs);\n        this.fs = fs;\n\n        let program = gl.createProgram();\n        gl.attachShader(program, vs);\n        gl.attachShader(program, fs);\n        gl.linkProgram(program);\n        this.program = program;\n\n        if (!gl.getShaderParameter(vs, gl.COMPILE_STATUS))\n        {\n            console.warn(\n                cloudsVert.split('\\n').map((line, i) => {\n                    return (\"    \" + i).slice(-4) + ': ' + line;\n                }).join('\\n')\n            )\n            console.error(gl.getShaderInfoLog(vs));\n        }\n        if (!gl.getShaderParameter(fs, gl.COMPILE_STATUS))\n        {\n            console.warn(\n                cloudsFrag.split('\\n').map((line, i) => {\n                    return (\"    \" + i).slice(-4) + ': ' + line;\n                }).join('\\n')\n            )\n            console.error(gl.getShaderInfoLog(fs));\n        }\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS))\n            console.error(gl.getProgramInfoLog(program));\n\n        let vertices = new Float32Array([\n            -1.0, 1.0, 1.0, 1.0, 1.0, -1.0, // Triangle 1\n            -1.0, 1.0, 1.0, -1.0, -1.0, -1.0 // Triangle 2\n        ]);\n\n        let vbuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n\n        gl.useProgram(program);\n\n        program.uColor = gl.getUniformLocation(program, \"_color\");\n        gl.uniform4fv(program.uColor, [0.0, 0.3, 0.0, 1.0]);\n\n        program.uTime = gl.getUniformLocation(program, \"_time\");\n        gl.uniform1f(program.uTime, 0);\n\n        program.uResolution = gl.getUniformLocation(program, \"_resolution\");\n        gl.uniform2fv(program.uResolution, [this.ctx.width, this.ctx.height]);\n\n        program.aVertexPosition = gl.getAttribLocation(program, \"position\");\n        gl.enableVertexAttribArray(program.aVertexPosition);\n        gl.vertexAttribPointer(program.aVertexPosition, 2, gl.FLOAT, false, 0, 0);\n\n        gl.drawArrays(gl.TRIANGLES, 0, 2 * 3);\n    }\n\n    resize = () => {\n        let gl = this.ctx.context;\n        gl.viewport(0, 0, this.ctx.width, this.ctx.height);\n    }\n\n    mousemove = () => {\n\n    }\n\n    update = () => {\n        // let dt = this.ctx.dt / 1000;\n        let dt = 1.0 / 30;\n        \n        this.time += dt;\n    }\n\n    draw = () => {\n        if (this.stats) {\n            this.stats.end();\n            this.stats.begin();\n        }\n\n        let gl = this.ctx.context;\n\n        gl.uniform1f(this.program.uTime, this.time);\n        gl.uniform2fv(this.program.uResolution, [this.ctx.width, this.ctx.height]);\n        gl.drawArrays(gl.TRIANGLES, 0, 2 * 3);\n\n        super.draw();\n    }\n}\n","\n/* Copyright (C) 2013 Justin Windle, http://soulwire.co.uk */\n\n(function ( root, factory ) {\n\n  if ( typeof exports === 'object' ) {\n\n    // CommonJS like\n    module.exports = factory(root, root.document);\n\n  } else if ( typeof define === 'function' && define.amd ) {\n\n    // AMD\n    define( function() { return factory( root, root.document ); });\n\n  } else {\n\n    // Browser global\n    root.Sketch = factory( root, root.document );\n  }\n\n}( typeof window !== \"undefined\" ? window : this, function ( window, document ) {\n\n\n  \"use strict\";\n\n  /*\n  ----------------------------------------------------------------------\n\n    Config\n\n  ----------------------------------------------------------------------\n  */\n\n  var MATH_PROPS = 'E LN10 LN2 LOG2E LOG10E PI SQRT1_2 SQRT2 abs acos asin atan ceil cos exp floor log round sin sqrt tan atan2 pow max min'.split( ' ' );\n  var HAS_SKETCH = '__hasSketch';\n  var M = Math;\n\n  var CANVAS = 'canvas';\n  var WEBGL = 'webgl';\n  var DOM = 'dom';\n\n  var doc = document;\n  var win = window;\n\n  var instances = [];\n\n  var defaults = {\n\n    fullscreen: true,\n    autostart: true,\n    autoclear: true,\n    autopause: true,\n    container: doc.body,\n    interval: 1,\n    globals: true,\n    retina: false,\n    type: CANVAS\n  };\n\n  var keyMap = {\n\n     8: 'BACKSPACE',\n     9: 'TAB',\n    13: 'ENTER',\n    16: 'SHIFT',\n    27: 'ESCAPE',\n    32: 'SPACE',\n    37: 'LEFT',\n    38: 'UP',\n    39: 'RIGHT',\n    40: 'DOWN'\n  };\n\n  /*\n  ----------------------------------------------------------------------\n\n    Utilities\n\n  ----------------------------------------------------------------------\n  */\n\n  function isArray( object ) {\n\n    return Object.prototype.toString.call( object ) == '[object Array]';\n  }\n\n  function isFunction( object ) {\n\n    return typeof object == 'function';\n  }\n\n  function isNumber( object ) {\n\n    return typeof object == 'number';\n  }\n\n  function isString( object ) {\n\n    return typeof object == 'string';\n  }\n\n  function keyName( code ) {\n\n    return keyMap[ code ] || String.fromCharCode( code );\n  }\n\n  function extend( target, source, overwrite ) {\n\n    for ( var key in source )\n\n      if ( overwrite || !( key in target ) )\n\n        target[ key ] = source[ key ];\n\n    return target;\n  }\n\n  function proxy( method, context ) {\n\n    return function() {\n\n      method.apply( context, arguments );\n    };\n  }\n\n  function clone( target ) {\n\n    var object = {};\n\n    for ( var key in target ) {\n      \n      if ( key === 'webkitMovementX' || key === 'webkitMovementY' )\n        continue;\n\n      if ( isFunction( target[ key ] ) )\n\n        object[ key ] = proxy( target[ key ], target );\n\n      else\n\n        object[ key ] = target[ key ];\n    }\n\n    return object;\n  }\n\n  /*\n  ----------------------------------------------------------------------\n\n    Constructor\n\n  ----------------------------------------------------------------------\n  */\n\n  function constructor( context ) {\n\n    var request, handler, target, parent, bounds, index, suffix, clock, node, copy, type, key, val, min, max, w, h;\n\n    var counter = 0;\n    var touches = [];\n    var resized = false;\n    var setup = false;\n    var ratio = win.devicePixelRatio || 1;\n    var isDiv = context.type == DOM;\n    var is2D = context.type == CANVAS;\n\n    var mouse = {\n      x:  0.0, y:  0.0,\n      ox: 0.0, oy: 0.0,\n      dx: 0.0, dy: 0.0\n    };\n\n    var eventMap = [\n\n      context.eventTarget || context.element,\n\n        pointer, 'mousedown', 'touchstart',\n        pointer, 'mousemove', 'touchmove',\n        pointer, 'mouseup', 'touchend',\n        pointer, 'click',\n        pointer, 'mouseout',\n        pointer, 'mouseover',\n\n      doc,\n\n        keypress, 'keydown', 'keyup',\n\n      win,\n\n        active, 'focus', 'blur',\n        resize, 'resize'\n    ];\n\n    var keys = {}; for ( key in keyMap ) keys[ keyMap[ key ] ] = false;\n\n    function trigger( method ) {\n\n      if ( isFunction( method ) )\n\n        method.apply( context, [].splice.call( arguments, 1 ) );\n    }\n\n    function bind( on ) {\n\n      for ( index = 0; index < eventMap.length; index++ ) {\n\n        node = eventMap[ index ];\n\n        if ( isString( node ) )\n\n        target[ ( on ? 'add' : 'remove' ) + 'EventListener' ].call( target, node, handler, {\n          passive: false,\n          capture: false,\n        });\n\n        else if ( isFunction( node ) )\n\n          handler = node;\n\n        else target = node;\n      }\n    }\n\n    function update() {\n\n      cAF( request );\n      request = rAF( update );\n\n      if ( !setup ) {\n\n        trigger( context.setup );\n        setup = isFunction( context.setup );\n      }\n\n      if ( !resized ) {\n        trigger( context.resize );\n        resized = isFunction( context.resize );\n      }\n\n      if ( context.running && !counter ) {\n\n        context.dt = ( clock = +new Date() ) - context.now;\n        context.millis += context.dt;\n        context.now = clock;\n\n        trigger( context.update );\n\n        // Pre draw\n\n        if ( is2D ) {\n\n          if ( context.retina ) {\n\n            context.save();\n            \n            if (context.autoclear) {\n              context.scale( ratio, ratio );\n            }\n          }\n\n          if ( context.autoclear )\n\n            context.clear();\n        }\n\n        // Draw\n\n        trigger( context.draw );\n\n        // Post draw\n\n        if ( is2D && context.retina )\n\n          context.restore();\n      }\n\n      counter = ++counter % context.interval;\n    }\n\n    function resize() {\n\n      target = isDiv ? context.style : context.canvas;\n      suffix = isDiv ? 'px' : '';\n\n      w = context.width;\n      h = context.height;\n\n      if ( context.fullscreen ) {\n\n        h = context.height = win.innerHeight;\n        w = context.width = win.innerWidth;\n      }\n\n      if ( context.retina && is2D && ratio ) {\n\n        target.style.height = h + 'px';\n        target.style.width = w + 'px';\n\n        w *= ratio;\n        h *= ratio;\n      }\n\n      if ( target.height !== h )\n\n        target.height = h + suffix;\n\n      if ( target.width !== w )\n\n        target.width = w + suffix;\n\n      if ( is2D && !context.autoclear && context.retina )\n\n        context.scale( ratio, ratio );\n\n      if ( setup ) trigger( context.resize );\n    }\n\n    function align( touch, target ) {\n\n      bounds = target.getBoundingClientRect();\n\n      touch.x = touch.pageX - bounds.left - (win.scrollX || win.pageXOffset);\n      touch.y = touch.pageY - bounds.top - (win.scrollY || win.pageYOffset);\n\n      return touch;\n    }\n\n    function augment( touch, target ) {\n\n      align( touch, context.element );\n\n      target = target || {};\n\n      target.ox = target.x || touch.x;\n      target.oy = target.y || touch.y;\n\n      target.x = touch.x;\n      target.y = touch.y;\n\n      target.dx = target.x - target.ox;\n      target.dy = target.y - target.oy;\n\n      return target;\n    }\n\n    function process( event ) {\n\n      if ( event.currentTarget === context.element )\n\n        event.preventDefault();\n\n      copy = clone( event );\n      copy.originalEvent = event;\n\n      if ( copy.touches ) {\n\n        touches.length = copy.touches.length;\n\n        for ( index = 0; index < copy.touches.length; index++ )\n\n          touches[ index ] = augment( copy.touches[ index ], touches[ index ] );\n\n      } else {\n\n        touches.length = 0;\n        touches[0] = augment( copy, mouse );\n      }\n\n      extend( mouse, touches[0], true );\n\n      return copy;\n    }\n\n    function pointer( event ) {\n\n      event = process( event );\n\n      min = ( max = eventMap.indexOf( type = event.type ) ) - 1;\n\n      context.dragging =\n\n        /down|start/.test( type ) ? true :\n\n        /up|end/.test( type ) ? false :\n\n        context.dragging;\n\n      while( min )\n\n        isString( eventMap[ min ] ) ?\n\n          trigger( context[ eventMap[ min-- ] ], event ) :\n\n        isString( eventMap[ max ] ) ?\n\n          trigger( context[ eventMap[ max++ ] ], event ) :\n\n        min = 0;\n    }\n\n    function keypress( event ) {\n\n      key = event.keyCode;\n      val = event.type == 'keyup';\n      keys[ key ] = keys[ keyName( key ) ] = !val;\n\n      trigger( context[ event.type ], event );\n    }\n\n    function active( event ) {\n\n      if ( context.autopause )\n\n        ( event.type == 'blur' ? stop : start )();\n\n      trigger( context[ event.type ], event );\n    }\n\n    // Public API\n\n    function start() {\n\n      context.now = +new Date();\n      context.running = true;\n    }\n\n    function stop() {\n\n      context.running = false;\n    }\n\n    function toggle() {\n\n      ( context.running ? stop : start )();\n    }\n\n    function clear() {\n\n      if ( is2D )\n\n        context.clearRect( 0, 0, context.width * ratio, context.height * ratio );\n    }\n\n    function destroy() {\n\n      parent = context.element.parentNode;\n      index = instances.indexOf( context );\n\n      if ( parent ) parent.removeChild( context.element );\n      if ( ~index ) instances.splice( index, 1 );\n\n      bind( false );\n      stop();\n    }\n\n    extend( context, {\n\n      touches: touches,\n      mouse: mouse,\n      keys: keys,\n\n      dragging: false,\n      running: false,\n      millis: 0,\n      now: NaN,\n      dt: NaN,\n\n      destroy: destroy,\n      toggle: toggle,\n      clear: clear,\n      start: start,\n      stop: stop\n    });\n\n    instances.push( context );\n\n    return ( context.autostart && start(), bind( true ), resize(), update(), context );\n  }\n\n  /*\n  ----------------------------------------------------------------------\n\n    Global API\n\n  ----------------------------------------------------------------------\n  */\n\n  var element, context, Sketch = {\n\n    CANVAS: CANVAS,\n    WEB_GL: WEBGL,\n    WEBGL: WEBGL,\n    DOM: DOM,\n\n    instances: instances,\n\n    install: function( context ) {\n\n      if ( !context[ HAS_SKETCH ] ) {\n\n        for ( var i = 0; i < MATH_PROPS.length; i++ )\n\n          context[ MATH_PROPS[i] ] = M[ MATH_PROPS[i] ];\n\n        extend( context, {\n\n          TWO_PI: M.PI * 2,\n          HALF_PI: M.PI / 2,\n          QUARTER_PI: M.PI / 4,\n\n          random: function( min, max ) {\n\n            if ( isArray( min ) )\n\n              return min[ ~~( M.random() * min.length ) ];\n\n            if ( !isNumber( max ) )\n\n              max = min || 1, min = 0;\n\n            return min + M.random() * ( max - min );\n          },\n\n          lerp: function( min, max, amount ) {\n\n            return min + amount * ( max - min );\n          },\n\n          map: function( num, minA, maxA, minB, maxB ) {\n\n            return ( num - minA ) / ( maxA - minA ) * ( maxB - minB ) + minB;\n          }\n        });\n\n        context[ HAS_SKETCH ] = true;\n      }\n    },\n\n    create: function( options ) {\n\n      options = extend( options || {}, defaults );\n\n      if ( options.globals ) Sketch.install( self );\n\n      element = options.element = options.element || doc.createElement( options.type === DOM ? 'div' : 'canvas' );\n\n      context = options.context = options.context || (function() {\n\n        switch( options.type ) {\n\n          case CANVAS:\n\n            return element.getContext( '2d', options );\n\n          case WEBGL:\n\n            return element.getContext( 'webgl', options ) || element.getContext( 'experimental-webgl', options );\n\n          case DOM:\n\n            return element.canvas = element;\n        }\n\n      })();\n\n      ( options.container || doc.body ).appendChild( element );\n\n      return Sketch.augment( context, options );\n    },\n\n    augment: function( context, options ) {\n\n      options = extend( options || {}, defaults );\n\n      options.element = context.canvas || context;\n      options.element.className += ' sketch';\n\n      extend( context, options, true );\n\n      return constructor( context );\n    }\n  };\n\n  /*\n  ----------------------------------------------------------------------\n\n    Shims\n\n  ----------------------------------------------------------------------\n  */\n\n  var vendors = [ 'ms', 'moz', 'webkit', 'o' ];\n  var scope = self;\n  var then = 0;\n\n  var a = 'AnimationFrame';\n  var b = 'request' + a;\n  var c = 'cancel' + a;\n\n  var rAF = scope[ b ];\n  var cAF = scope[ c ];\n\n  for ( var i = 0; i < vendors.length && !rAF; i++ ) {\n\n    rAF = scope[ vendors[ i ] + 'Request' + a ];\n    cAF = scope[ vendors[ i ] + 'Cancel' + a ];\n  }\n\n  scope[ b ] = rAF = rAF || function( callback ) {\n\n    var now = +new Date();\n    var dt = M.max( 0, 16 - ( now - then ) );\n    var id = setTimeout( function() {\n      callback( now + dt );\n    }, dt );\n\n    then = now + dt;\n    return id;\n  };\n\n  scope[ c ] = cAF = cAF || function( id ) {\n    clearTimeout( id );\n  };\n\n  /*\n  ----------------------------------------------------------------------\n\n    Output\n\n  ----------------------------------------------------------------------\n  */\n\n  return Sketch;\n\n}));\n","// import CCapture from 'ccapture.js';\n\nexport default class BaseSketch {\n    constructor() {\n        this.dark = (document.body.id === 'dark') ? 1 : 0;\n\n        if (typeof CCapture !== 'undefined') {\n            this.ccapture = new CCapture({\n                format: 'png',\n                framerate: 30,\n                verbose: true,\n            });\n            this.numframes = 10 * 30;\n            this.ccapture.start();\n        }\n    }\n\n    getName() {\n        return 'untitled';\n    }\n\n    supportsAudio() {\n        return false;\n    }\n\n    setDarkMode(dark) {\n        this.dark = (dark === true) ? 1 : 0;\n    }\n\n    capture(canvas) {\n\n    }\n\n    draw() {\n        if (this.ccapture) {\n            this.frames = (this.frames || 0);\n            if (this.frames < this.numframes) {\n                this.ccapture.capture(this.ctx.element);\n            }\n            else if (this.frames === this.numframes) {\n                this.ccapture.stop();\n                this.ccapture.save();\n            }\n\n            this.frames++;\n        }\n    }\n\n    darkBG = \"#0e0e0e\".match(/[A-Za-z0-9]{2}/g).map(function(v) { return parseInt(v, 16) / 255 });\n    lightBG = \"#ffffff\".match(/[A-Za-z0-9]{2}/g).map(function(v) { return parseInt(v, 16) / 255 });\n}\n","module.exports = \"#define GLSLIFY 1\\nattribute vec2 position;\\n\\nvarying vec2 uv;\\n\\nvoid main() {\\n    uv = position * 0.5 + 0.5;\\n    gl_Position = vec4(position, 0.0, 1.0);\\n}\\n\"","module.exports = \"precision highp float;\\n#define GLSLIFY 1\\n\\nuniform vec4 _color;\\nuniform float _time;\\nuniform vec2 _resolution;\\n\\nuniform float _noiseFreq;\\n\\nvarying vec2 uv;\\n\\n// #pragma glslify: fbm_9_2D = require(../../include/fbm/2D/fbm_9_2D)\\nfloat hash1_1D_3_0( float n )\\n{\\n    return fract( n*17.0*fract( n*0.3183099 ) );\\n}\\n\\n\\n\\n\\nfloat noise_3D_2_1( in vec3 x )\\n{\\n    vec3 p = floor(x);\\n    vec3 w = fract(x);\\n    \\n    vec3 u = w*w*w*(w*(w*6.0-15.0)+10.0);\\n    \\n    float n = p.x + 317.0*p.y + 157.0*p.z;\\n    \\n    float a = hash1_1D_3_0(n+0.0);\\n    float b = hash1_1D_3_0(n+1.0);\\n    float c = hash1_1D_3_0(n+317.0);\\n    float d = hash1_1D_3_0(n+318.0);\\n    float e = hash1_1D_3_0(n+157.0);\\n\\tfloat f = hash1_1D_3_0(n+158.0);\\n    float g = hash1_1D_3_0(n+474.0);\\n    float h = hash1_1D_3_0(n+475.0);\\n\\n    float k0 =   a;\\n    float k1 =   b - a;\\n    float k2 =   c - a;\\n    float k3 =   e - a;\\n    float k4 =   a - b - c + d;\\n    float k5 =   a - c - e + g;\\n    float k6 =   a - b - e + f;\\n    float k7 = - a + b + c - d + e - f - g + h;\\n\\n    return -1.0+2.0*(k0 + k1*u.x + k2*u.y + k3*u.z + k4*u.x*u.y + k5*u.y*u.z + k6*u.z*u.x + k7*u.x*u.y*u.z);\\n}\\n\\n\\n\\n\\nconst mat3 m3_1_2  = mat3( 0.00,  0.80,  0.60,\\n                      -0.80,  0.36, -0.48,\\n                      -0.60, -0.48,  0.64 );\\n\\nfloat fbm_4_3D_1_3( in vec3 x )\\n{\\n    float f = 2.0;\\n    float s = 0.5;\\n    float a = 0.0;\\n    float b = 0.5;\\n\\n    // #pragma unroll_loop\\n    for( int i=0; i<5; i++ )\\n    {\\n        float n = noise_3D_2_1(x);\\n        a += b*n;\\n        b *= s;\\n        x = f*m3_1_2*x;\\n    }\\n\\treturn a;\\n}\\n\\n\\n\\n\\n\\nmat3 setCamera( vec3 ro, vec3 ta, float cr )\\n{\\n\\tvec3 cw = normalize(ta-ro);\\n\\tvec3 cp = vec3(sin(cr), cos(cr),0.0);\\n\\tvec3 cu = normalize( cross(cw,cp) );\\n\\tvec3 cv = normalize( cross(cu,cw) );\\n    return mat3( cu, cv, cw );\\n}\\n\\nfloat rayPlaneIntersection( vec3 ro, vec3 rd, vec3 po, vec3 pn)\\n{\\n    float denom = dot(pn, rd);\\n    float t = dot(po - ro, pn) / denom;\\n    return t;\\n}\\n\\nfloat fbm_2(vec3 pos)\\n{\\n    float value = 0.0;\\n    float intensity = 0.5;\\n    for (int i = 0; i < 2; i++)\\n    {\\n        value += noise_3D_2_1(pos) * intensity;\\n        intensity *= 0.5;\\n        pos *= 2.0;\\n    }\\n    return value;\\n}\\n\\nfloat map(vec3 pos)\\n{\\n    float density = clamp(fbm_2(pos * 0.007 + vec3(0.3, 0.0, 2.0) * _time), 0.0, 1.0);\\n    density -= smoothstep(-200.0, 10.0, pos.y);\\n    density *= smoothstep(-700.0, -500.0, pos.y);\\n    density -= 0.1;\\n    return clamp(density, 0.0, 1.0);\\n}\\n\\nfloat shadow(vec3 pos)\\n{\\n    float s = 0.0;\\n    vec3 lightDir = normalize(vec3(0.0, 3.0, 0.0));\\n    s += map(pos + 1.0 * lightDir);\\n    s += map(pos + 10.3 * lightDir);\\n    s += map(pos + 20.3 * lightDir);\\n    s += map(pos + 30.4 * lightDir);\\n    s += map(pos + 40.8 * lightDir);\\n    s *= 0.2;\\n    return s;\\n}\\n\\nvec4 raymarch(vec3 cameraPos, vec3 rayDir, float stepSize, out int steps, out vec3 endPos)\\n{\\n    vec4 sum = vec4(0.0, 0.0, 0.0, 1.0);\\n    vec3 pos = cameraPos;\\n    float weight = stepSize;\\n    steps = 0;\\n    for (int i = 0; i < 128; i++)\\n    {\\n        float s = shadow(pos);\\n        vec3 color = mix(vec3(0.8, 0.8, 0.8), vec3(0.1, 0.1, 0.02), s);\\n        // vec3 color = vec3(0.5, 0.2, 0.2);\\n        float alpha = map(pos);\\n        sum.rgb += sum.a * alpha * color;\\n        sum.a *= (1.0 - alpha);\\n        if (sum.a < 0.01) break;\\n        pos += rayDir * stepSize;\\n        stepSize *= 1.013;\\n        steps++;\\n    }\\n    endPos = pos;\\n    return clamp(sum, 0.0, 1.0);\\n}\\n\\nvoid main()\\n{\\n    float aspectRatio = _resolution.x / _resolution.y;\\n    vec2 p = (uv - 0.5) * vec2(aspectRatio, 1.0);\\n\\n    // gl_FragColor = vec4(fract(p * 10.0), 0.0, 1.0);\\n    // return;\\n    \\n    vec3 cameraPos = vec3(0.0, 10.0, -80.0);\\n    vec3 cameraTarget = vec3(0.0, 0.0, 0.0);\\n\\n    mat3 cameraMat = setCamera(cameraPos, cameraTarget, 0.0);\\n    vec3 rayDir = cameraMat * normalize(vec3(p.xy, 1.0));\\n\\n    vec3 planeNormal = vec3(0.0, 1.0, 0.0);\\n    vec3 planeCenter = vec3(0.0, 9.0, 0.0);\\n\\n    float t = rayPlaneIntersection(cameraPos, rayDir, planeCenter, planeNormal);\\n\\n    vec3 startPos = cameraPos;   \\n    if (t > 0.0) {\\n        startPos += rayDir * t;\\n        int steps;\\n        vec3 endPos;\\n        vec4 color = raymarch(startPos, rayDir, 10.0, steps, endPos);\\n        gl_FragColor = vec4(vec3(0.3, 0.3, 0.5) * color.a + color.rgb, 1.0);\\n        // float dist = length(endPos - cameraPos);\\n        // gl_FragColor = mix(\\n        //     vec4(0.3, 0.3, 0.5, 1.0),\\n        //     mix(\\n        //         vec4(0.8, 0.8, 0.8, 1.0),\\n        //         vec4(0.7, 0.5, 0.5, 1.0),\\n        //         clamp(pow(dist / 4000.0, 0.6), 0.0, 1.0)\\n        //     ),\\n        //     alpha\\n        // );\\n        // gl_FragColor = mix(vec4(0.0, 0.8, 0.8, 1.0), vec4(1.0, 0.0, 0.0, 1.0), float(steps) / 128.0);\\n        // gl_FragColor = mix(vec4(0.3, 0.3, 0.5, 1.0), vec4(0.8, 0.8, 0.8, 1.0), alpha);\\n        return;\\n    }\\n    else {\\n        gl_FragColor = vec4(0.3, 0.3, 0.5, 1.0);\\n        return;\\n    }\\n}\\n\""],"sourceRoot":""}